<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拼好图</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>拼好图</h1>
        </header>

        <div class="controls">
            <div class="control-group">
                <label for="pointCount">选择点位数量:</label>
                <div class="input-container">
                    <input type="number" id="pointCount" min="1" max="20" value="30" class="number-input">
                    <div class="input-hint">
                        当前筛选状态下可抽取最大点数: <span id="maxPointsHint">20</span>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label>选择类型:</label>
                <div class="checkbox-grid" id="typeCheckboxes">
                    <!-- 动态生成复选框 -->
                </div>
                <div class="checkbox-actions">
                    <button type="button" id="selectAll">全选</button>
                    <button type="button" id="clearAll">清空</button>
                </div>
            </div>

            <div class="control-group">
                <label>
                    <input type="checkbox" id="regionPriority">
                    国家优先模式（将相同国家的点位放在一起）
                </label>
                <div class="sub-option" id="advancedRegionSortContainer" style="margin-left: 24px; margin-top: 8px; display: none;">
                    <label>
                        <input type="checkbox" id="advancedRegionSort">
                        更进一步的地区优先排序（将相近的地区排在一起）（beta）
                    </label>
                </div>
            </div>

            <div class="control-group">
                <label>
                    <input type="checkbox" id="xyMode">
                    XY模式（相邻点位不会是同一个国家）（beta:大部分时候有bug）
                </label>
                <div class="sub-option" id="douMContainer" style="margin-left: 24px; margin-top: 8px; display: none;">
                    <label>
                        <input type="checkbox" id="douMMode">
                        抖M模式（生成类似蒙德-渊下宫-须弥-层岩地下-纳塔....类似的究极跨图路线，非常适合禁传）（beta）
                    </label>
                </div>
            </div>

            <div class="control-group">
                <button id="generateRoute" class="generate-btn">生成拼好图</button>
            </div>
                <div style="text-align: center; margin-top: 10px;">
                    <small style="color: #888; cursor: pointer;" ondblclick="if(window.routeGenerator) { window.routeGenerator.clearUserPreferences(); }" title="双击清除缓存">
                        最近生成的设置会自动写入缓存，双击此处可清除缓存
                    </small>
                </div>            
        </div>

        <div class="results" id="results">
            <div class="results-header">
                <h2>拼好图结果</h2>
                <button id="saveImage" class="save-btn" style="display: inline-block;">保存为图片</button>
            </div>
            <div class="route-grid" id="routeGrid">
                <!-- 动态生成线路图片 -->
            </div>
            <a style="text-align: center; display: block ; font-size: 20px;">点位说明：点位来自各材料线路的部分点位和Y7、+6全图</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="route-config.js"></script>
    <script src="script.js"></script>
</body>
</html>
