[build]
  # 如果你有构建步骤，在这里配置
  # command = "npm run build"
  # publish = "dist"

[[redirects]]
  from = "/log"
  to = "https://socket.unhappycar.games/log"
  status = 200
  force = true

[[redirects]]
  from = "/log/*"
  to = "https://socket.unhappycar.games/log/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/api/*"
  to = "https://socket.unhappycar.games/api/:splat"
  status = 200
  force = true

# 默认重定向到首页
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[headers]
  # 为静态资源设置缓存
  for = "/static/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000"

  # 为 API 请求设置 CORS
  for = "/log"
  [headers.values]
    Access-Control-Allow-Origin = "*"
    Access-Control-Allow-Methods = "GET, POST, OPTIONS"
    Access-Control-Allow-Headers = "Content-Type"
